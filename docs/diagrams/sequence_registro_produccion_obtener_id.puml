@startuml sequence_registro_produccion_obtener_id
title Secuencia: Obtener Registro de ProducciÃ³n por ID

actor Cliente as User
participant "RegistroProduccionController" as Ctrl
participant "RegistroProduccionService" as Srv
participant "RegistroProduccionRepository (In-Memory)" as Repo
participant "RegistroProduccion" as Model
participant "RegistroProduccionDTO" as DTO

User -> Ctrl : GET /api/v1/registros-produccion/{id}
activate Ctrl
Ctrl -> Srv : obtenerRegistroProduccionPorId(id)
activate Srv
Srv -> Repo : findById(id)
activate Repo
Repo --> Srv : Optional<RegistroProduccion>
deactivate Repo
alt Registro Encontrado
    Srv -> Model : mapToDTO(registroEncontrado)
    activate Model
    Model --> Srv : registroDTO
    deactivate Model
    Srv --> Ctrl : registroDTO
    Ctrl --> User : HTTP 200 OK (body: RegistroProduccionDTO)
else Registro No Encontrado
    Srv --> Ctrl : throws ResourceNotFoundException
    deactivate Srv
    Ctrl -> GlobalExceptionHandler : maneja ResourceNotFoundException
    GlobalExceptionHandler --> Ctrl : ResponseEntity (Error)
    Ctrl --> User : HTTP 404 Not Found
end
deactivate Ctrl
@enduml
