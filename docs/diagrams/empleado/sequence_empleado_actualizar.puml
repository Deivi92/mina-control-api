@startuml sequence_empleado_actualizar
title Secuencia: Actualizar Empleado

actor Cliente as User
participant "EmpleadoController" as Ctrl
participant "EmpleadoService" as Srv
participant "EmpleadoRepository (In-Memory)" as Repo
participant "Empleado" as Model
participant "EmpleadoDTO" as DTO

User -> Ctrl : PUT /api/v1/empleados/{id} (body: EmpleadoDTO)
activate Ctrl
Ctrl -> Srv : actualizarEmpleado(id, empleadoDTO)
activate Srv
Srv -> DTO : mapToEntity(empleadoDTO)
activate DTO
DTO --> Srv : empleadoEntityParaActualizar
deactivate DTO
Srv -> Repo : findById(id)
activate Repo
Repo --> Srv : empleadoExistente (o Optional.empty())
deactivate Repo

alt empleadoExiste
  Srv -> Repo : save(empleadoActualizadoConDatosNuevos)
  activate Repo
  Repo --> Srv : empleadoGuardado
  deactivate Repo
  Srv -> Model : mapToDTO(empleadoGuardado)
  activate Model
  Model --> Srv : empleadoDTOResult
  deactivate Model
  Srv --> Ctrl : empleadoDTOResult
else noExiste
  Srv --> Ctrl : throw ResourceNotFoundException("Empleado no encontrado con id: " + id)
end

deactivate Srv

alt empleadoActualizado
  Ctrl --> User : HTTP 200 OK (body: EmpleadoDTO)
else ResourceNotFoundException
  Ctrl --> User : HTTP 404 Not Found
end
deactivate Ctrl

@enduml
