@startuml sequence_registro_produccion_obtener_todos
title Secuencia: Obtener Todos los Registros de ProducciÃ³n

actor Cliente as User
participant "RegistroProduccionController" as Ctrl
participant "RegistroProduccionService" as Srv
participant "RegistroProduccionRepository (In-Memory)" as RepoProd
participant "EmpleadoRepository (In-Memory)" as RepoEmp
participant "RegistroProduccion" as ModelProd
participant "Empleado" as ModelEmp
participant "RegistroProduccionResponseDTO" as ResDTO

User -> Ctrl : GET /api/registros-produccion
activate Ctrl
Ctrl -> Srv : obtenerTodosLosRegistros()
activate Srv

Srv -> RepoProd : findAll()
activate RepoProd
RepoProd --> Srv : listaRegistrosEntities
deactivate RepoProd

loop Para cada registro
    Srv -> RepoEmp : findById(registro.getResponsableTurnoId())
    activate RepoEmp
    RepoEmp --> Srv : empleado
    deactivate RepoEmp
    
    Srv -> ResDTO : fromEntity(registro, empleado)
    activate ResDTO
    ResDTO --> Srv : registroResponseDTO
    deactivate ResDTO
end

Srv --> Ctrl : listaRegistrosResponseDTO
deactivate Srv
Ctrl --> User : HTTP 200 OK (body: List<RegistroProduccionResponseDTO>)
deactivate Ctrl

@enduml
